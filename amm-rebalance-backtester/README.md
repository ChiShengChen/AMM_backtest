# AMM å‹•æ…‹å†å¹³è¡¡å›æ¸¬ç³»çµ±

> **ğŸš€ ä¸€è¡Œå‘½ä»¤å›æ¸¬**: `./run_single.sh BTCUSDC 1d 50`

## ğŸ¯ é …ç›®æ¦‚è¿°

é€™æ˜¯ä¸€å€‹å°ˆé–€ç”¨æ–¼ AMMï¼ˆè‡ªå‹•åŒ–åšå¸‚å•†ï¼Œä¸»è¦é‡å° Uniswap V3ï¼‰å‹•æ…‹å†å¹³è¡¡ç­–ç•¥å›æ¸¬çš„ Python ç³»çµ±ã€‚ç³»çµ±èƒ½å¤ æ¯”è¼ƒå›ºå®šç­–ç•¥èˆ‡å‹•æ…‹ç­–ç•¥çš„è¡¨ç¾ï¼Œåˆ†æ IL/LVR å’Œæ‘©æ“¦æˆæœ¬ï¼Œä¸¦é€šéåƒæ•¸å„ªåŒ–æ‰¾åˆ°æœ€ä½³ç­–ç•¥é…ç½®ã€‚

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

- **å¤šç­–ç•¥å›æ¸¬**: æ”¯æŒ Baseline å’Œ Dynamic ç­–ç•¥æ¯”è¼ƒ
- **åƒæ•¸å„ªåŒ–**: ä½¿ç”¨ Optuna é€²è¡Œè¶…åƒæ•¸å„ªåŒ–
- **å¤šå¹£ç¨®æ”¯æŒ**: ETH/USDCã€BTC/USDCã€USDC/USDT ç­‰
- **å¤šæ™‚é–“å°ºåº¦**: æ”¯æŒæ—¥ç·š(1d)ã€å°æ™‚ç·š(1h)ã€åˆ†é˜ç·š(1m)
- **å®Œæ•´åˆ†æ**: IL/LVR åˆ†æã€æ‘©æ“¦æˆæœ¬å»ºæ¨¡ã€é¢¨éšªæŒ‡æ¨™è¨ˆç®—
- **è‡ªå‹•åŒ–è…³æœ¬**: æ•¸æ“šç²å–ã€å›æ¸¬åŸ·è¡Œã€çµæœæ•´ç†

## ğŸ“Š ç­–ç•¥é¡å‹

### Baseline ç­–ç•¥
- **Baseline-Static**: è¢«å‹•è¶…å¯¬ä½ç½®ç­–ç•¥ï¼Œæœ€å°å†å¹³è¡¡
- **Baseline-Fixed**: å›ºå®šå¯¬åº¦ä½ç½®ï¼Œå›ºå®šåƒ¹æ ¼åå·®è§¸ç™¼

### Dynamic ç­–ç•¥
- **Dynamic-Vol**: æ³¢å‹•ç‡è‡ªé©æ‡‰å¯¬åº¦ + åƒ¹æ ¼åå·®è§¸ç™¼
- **Dynamic-Inventory**: åº«å­˜åå·® + è²»ç”¨å¯†åº¦è§¸ç™¼ + ä½é »å†æŠ•è³‡

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

```
amm-rebalance-backtester/
â”œâ”€â”€ src/                    # æ ¸å¿ƒä»£ç¢¼
â”‚   â”œâ”€â”€ core/              # å›æ¸¬å¼•æ“ã€æ•¸å­¸è¨ˆç®—
â”‚   â”œâ”€â”€ strategies/        # ç­–ç•¥å¯¦ç¾
â”‚   â”œâ”€â”€ io/                # æ•¸æ“šåŠ è¼‰å’Œé©—è­‰
â”‚   â”œâ”€â”€ opt/               # åƒæ•¸å„ªåŒ–
â”‚   â””â”€â”€ reporting/         # çµæœå ±å‘Šå’Œåœ–è¡¨
â”œâ”€â”€ data/                  # æ•¸æ“šå­˜å„²
â”œâ”€â”€ results/               # å›æ¸¬çµæœ
â”œâ”€â”€ reports/               # åœ–è¡¨å’Œå ±å‘Š
â”œâ”€â”€ configs/               # é…ç½®æ–‡ä»¶
â””â”€â”€ scripts/               # è‡ªå‹•åŒ–è…³æœ¬
```

## ğŸ“¥ æ•¸æ“šç²å–åŸç†

### 1. æ•¸æ“šä¾†æº
ç³»çµ±ä½¿ç”¨ **Binance REST API** ç²å–æ­·å²åƒ¹æ ¼æ•¸æ“šï¼Œæ”¯æŒï¼š
- **K-line æ•¸æ“š**: OHLCV (é–‹ç›¤ã€æœ€é«˜ã€æœ€ä½ã€æ”¶ç›¤ã€æˆäº¤é‡)
- **æ™‚é–“ç¯„åœ**: å¯è‡ªå®šç¾©ï¼Œé»˜èª 5 å¹´æ—¥ç·šæ•¸æ“š
- **å¹£ç¨®å°**: æ”¯æŒæ‰€æœ‰ Binance äº¤æ˜“å°

### 2. æ•¸æ“šç²å–æµç¨‹

```bash
# ä½¿ç”¨è‡ªå‹•åŒ–è…³æœ¬ä¸‹è¼‰æ•¸æ“š
./get_new_data.sh -s ETHUSDC,BTCUSDC -f 1d,1h -d 1825

# æˆ–å¿«é€Ÿæ·»åŠ æ–°å¹£ç¨®
./add_new_symbol.sh SOLUSDC 1d 365
```

**å…§éƒ¨å¯¦ç¾**:
1. **API èª¿ç”¨**: ä½¿ç”¨ `requests` åº«èª¿ç”¨ Binance API
2. **åˆ†é è™•ç†**: è‡ªå‹•è™•ç† API é™åˆ¶ï¼Œåˆ†æ‰¹ç²å–æ•¸æ“š
3. **æ•¸æ“šæ¸…æ´—**: è™•ç†ç¼ºå¤±å€¼ã€ç•°å¸¸å€¼ã€æ™‚é–“æˆ³å°é½Š
4. **æ ¼å¼æ¨™æº–åŒ–**: è½‰æ›ç‚ºç³»çµ±æ¨™æº– CSV æ ¼å¼
5. **ç›®éŒ„çµ„ç¹”**: æŒ‰å¹£ç¨®å’Œæ™‚é–“å°ºåº¦è‡ªå‹•åˆ†é¡

### 3. æ•¸æ“šçµæ§‹
```csv
timestamp,open,high,low,close,volume
2020-09-05,335.22,394.61,309.57,335.22,1234567
2020-09-06,334.89,360.32,316.02,352.84,2345678
...
```

## ğŸ”„ å›æ¸¬å¼•æ“åŸç†

### 1. å›æ¸¬æµç¨‹

```python
# æ ¸å¿ƒå›æ¸¬æµç¨‹
BacktestEngine.run_full_evaluation() -> Dict[str, Any]
â”œâ”€â”€ 1. æ•¸æ“šåŠ è¼‰å’Œé è™•ç†
â”œâ”€â”€ 2. ç­–ç•¥åˆå§‹åŒ–
â”œâ”€â”€ 3. äº‹ä»¶é©…å‹•æ¨¡æ“¬
â”œâ”€â”€ 4. æ€§èƒ½è¨ˆç®—
â””â”€â”€ 5. çµæœè¼¸å‡º
```

### 2. ç­–ç•¥åŸ·è¡Œæ©Ÿåˆ¶

**äº‹ä»¶é©…å‹•æ¶æ§‹**:
- **åƒ¹æ ¼äº‹ä»¶**: æ¯å€‹æ™‚é–“é»çš„ OHLCV æ•¸æ“š
- **å†å¹³è¡¡è§¸ç™¼**: åŸºæ–¼ç­–ç•¥é‚è¼¯çš„æ¢ä»¶åˆ¤æ–·
- **äº¤æ˜“åŸ·è¡Œ**: æ¨¡æ“¬çœŸå¯¦çš„ AMM æ“ä½œ
- **è²»ç”¨è¨ˆç®—**: åŒ…æ‹¬ Gas è²»ç”¨ã€æ»‘é»ã€ç®¡ç†è²»

**ç­–ç•¥é‚è¼¯ç¤ºä¾‹**:
```python
# Dynamic-Vol ç­–ç•¥æ ¸å¿ƒé‚è¼¯
def calculate_ranges(self, price_data, current_price, portfolio_value):
    # 1. è¨ˆç®—æ³¢å‹•ç‡
    volatility = price_data['returns'].rolling(30).std()
    
    # 2. å‹•æ…‹èª¿æ•´ä½ç½®å¯¬åº¦
    vol_adjustment = 1.5 - volatility * 10
    
    # 3. æ‡‰ç”¨åƒ¹æ ¼åå·®è§¸ç™¼
    if abs(price_change) > self.price_deviation_bps:
        return self._rebalance_positions()
    
    return current_ranges
```

### 3. æ€§èƒ½æŒ‡æ¨™è¨ˆç®—

**æ”¶ç›Šç‡æŒ‡æ¨™**:
- **APR**: å¹´åŒ–æ”¶ç›Šç‡ï¼ŒåŸºæ–¼ç´¯ç©æ”¶ç›Šè¨ˆç®—
- **MDD**: æœ€å¤§å›æ’¤ï¼Œä½¿ç”¨æ»¾å‹•æœ€å¤§å€¼è¨ˆç®—
- **Sharpe**: å¤æ™®æ¯”ç‡ï¼Œé¢¨éšªèª¿æ•´å¾Œæ”¶ç›Š
- **Calmar**: Calmar æ¯”ç‡ï¼Œæ”¶ç›Šèˆ‡å›æ’¤æ¯”

**é¢¨éšªæŒ‡æ¨™**:
- **IL (Impermanent Loss)**: ç„¡å¸¸æå¤±è¨ˆç®—
- **LVR (Loss Versus Rebalancing)**: ç›¸å°æ–¼å†å¹³è¡¡çš„æå¤±
- **æ³¢å‹•ç‡**: æ—¥æ”¶ç›Šç‡æ¨™æº–å·®

## ğŸ›ï¸ åƒæ•¸å„ªåŒ–åŸç†

### 1. Optuna å„ªåŒ–æ¡†æ¶

```python
# å„ªåŒ–ç›®æ¨™å‡½æ•¸
def _objective(self, trial):
    # 1. åƒæ•¸å»ºè­°
    k_width = trial.suggest_float('k_width', 0.8, 2.0)
    price_deviation_bps = trial.suggest_float('price_deviation_bps', 20, 120)
    rebalance_cooldown_hours = trial.suggest_int('rebalance_cooldown_hours', 6, 48)
    
    # 2. ç­–ç•¥å›æ¸¬
    strategy = DynamicVolatilityStrategy(k_width, price_deviation_bps, rebalance_cooldown_hours)
    results = self._run_backtest(strategy)
    
    # 3. è¿”å›å„ªåŒ–ç›®æ¨™ (æœ€å¤§åŒ– APR)
    return results['apr']
```

### 2. å„ªåŒ–åƒæ•¸

**æ ¸å¿ƒåƒæ•¸**:
- **k_width**: ä½ç½®å¯¬åº¦èª¿æ•´ä¿‚æ•¸ (0.8-2.0)
- **price_deviation_bps**: åƒ¹æ ¼åå·®è§¸ç™¼é–¾å€¼ (20-120 bps)
- **rebalance_cooldown_hours**: å†å¹³è¡¡å†·å»æ™‚é–“ (6-48 å°æ™‚)

**å„ªåŒ–ç­–ç•¥**:
- **æ–¹å‘**: æœ€å¤§åŒ– APR
- **è©¦é©—æ¬¡æ•¸**: å¯é…ç½® (å»ºè­° 20-100 æ¬¡)
- **æœç´¢ç®—æ³•**: TPE (Tree-structured Parzen Estimator)
- **æ—©åœæ©Ÿåˆ¶**: æ”¯æŒæå‰çµ‚æ­¢ä½è³ªé‡è©¦é©—

### 3. å„ªåŒ–çµæœ

```bash
# é‹è¡Œå„ªåŒ–
python run.py full --pool ETHUSDC --freq 1d --study-name ethusdc_optimization --n-trials 20

# å„ªåŒ–çµæœç¤ºä¾‹
Best trial: 15
Best value: 12.46
Best params: {
    'k_width': 1.91,
    'price_deviation_bps': 32.34,
    'rebalance_cooldown_hours': 41
}
```

## ğŸ“ˆ çµæœç”ŸæˆåŸç†

### 1. åœ–è¡¨ç”Ÿæˆ

**æ”¯æŒçš„åœ–è¡¨é¡å‹**:
1. **Equity Curves**: æ·¨å€¼æ›²ç·šæ¯”è¼ƒ
2. **APR vs MDD Scatter**: é¢¨éšª-æ”¶ç›Šæ•£é»åœ–
3. **Fee vs Price PnL**: è²»ç”¨èˆ‡åƒ¹æ ¼ PnL åˆ†æ
4. **Sensitivity Heatmap**: åƒæ•¸æ•æ„Ÿæ€§ç†±åœ–
5. **Gas vs Frequency Contour**: Gas è²»ç”¨èˆ‡é »ç‡åˆ†æ
6. **IL Curve**: ç„¡å¸¸æå¤±æ›²ç·š
7. **LVR Estimates**: LVR ä¼°ç®—åœ–

**åœ–è¡¨ç”Ÿæˆæµç¨‹**:
```python
# åœ–è¡¨ç”Ÿæˆå™¨
class PlotGenerator:
    def plot_equity_curves(self, results, save_path):
        # 1. æ•¸æ“šæº–å‚™
        strategies = self._extract_strategy_data(results)
        
        # 2. åœ–è¡¨å‰µå»º
        fig, ax = plt.subplots(figsize=(12, 8))
        
        # 3. æ•¸æ“šç¹ªè£½
        for strategy_name, strategy_data in strategies.items():
            equity_curve = self._calculate_equity_curve(strategy_data)
            ax.plot(equity_curve, label=strategy_name)
        
        # 4. æ¨£å¼è¨­ç½®
        ax.set_title(f'Equity Curves - {self.pool}')
        ax.legend()
        
        # 5. ä¿å­˜åœ–è¡¨
        plt.savefig(save_path, dpi=300, bbox_inches='tight')
```

### 2. å ±å‘Šç”Ÿæˆ

**ç­–ç•¥è¨˜éŒ„**:
- **JSON æ ¼å¼**: å®Œæ•´çš„ç­–ç•¥åƒæ•¸å’Œæ€§èƒ½æ•¸æ“š
- **CSV æ‘˜è¦**: é—œéµæŒ‡æ¨™çš„è¡¨æ ¼å½¢å¼
- **æ–‡æœ¬å ±å‘Š**: äººé¡å¯è®€çš„ç­–ç•¥èªªæ˜

**ç›®éŒ„çµ„ç¹”**:
```
results/
â”œâ”€â”€ {å¹£ç¨®}_{æ™‚é–“å°ºåº¦}_{æ™‚é–“æˆ³}/
â”‚   â”œâ”€â”€ strategy_record_{æ™‚é–“æˆ³}.json
â”‚   â”œâ”€â”€ strategy_summary_{æ™‚é–“æˆ³}.csv
â”‚   â””â”€â”€ strategy_report_{æ™‚é–“æˆ³}.txt
â”œâ”€â”€ common/                    # é€šç”¨æ–‡ä»¶
â””â”€â”€ INDEX.md                  # ç›®éŒ„ç´¢å¼•
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ä¸€è¡Œå‘½ä»¤å›æ¸¬æ–°CSV

```bash
# æœ€æ¨è–¦ï¼šä½¿ç”¨è…³æœ¬å›æ¸¬
./run_single.sh BTCUSDC 1d 50

# ç›´æ¥å‘½ä»¤å›æ¸¬
python run.py full --pool BTCUSDC --freq 1d --n-trials 50
```

**åƒæ•¸èªªæ˜**ï¼š
- `BTCUSDC`: æ›¿æ›ç‚ºæ‚¨çš„å¹£ç¨®ä»£ç¢¼
- `1d`: æ•¸æ“šé »ç‡ (1d=æ—¥ç·š, 1h=å°æ™‚ç·š)  
- `50`: å„ªåŒ–è©¦é©—æ¬¡æ•¸

**çµæœä½ç½®**ï¼š
- ğŸ“Š åœ–è¡¨ï¼š`reports/figs/btcusdc/`
- ğŸ“ˆ æ•¸æ“šï¼š`results/strategy_*_*.json`
- ğŸ“‹ å ±å‘Šï¼š`results/strategy_report_*.txt`

### ğŸ“ æ•¸æ“šæ–‡ä»¶çµæ§‹è¨­ç½®

ç³»çµ±æœŸæœ›çš„æ•¸æ“šæ–‡ä»¶çµæ§‹ï¼š
```
data/
â”œâ”€â”€ BTCUSDC/
â”‚   â””â”€â”€ price_1d.csv
â”œâ”€â”€ ETHUSDC/
â”‚   â””â”€â”€ price_1d.csv
â””â”€â”€ USDCUSDT/
    â””â”€â”€ price_1d.csv
```

**å¦‚æœæ‚¨æœ‰5å¹´æ•¸æ“šæ–‡ä»¶** (å¦‚ `data/5year_daily/ETHUSDC_1d_20200905_20250903.csv`)ï¼š

```bash
# å‰µå»ºç›®éŒ„çµæ§‹
mkdir -p data/ETHUSDC data/USDCUSDT

# å‰µå»ºç¬¦è™Ÿéˆæ¥ (æ¨è–¦)
ln -sf ../5year_daily/ETHUSDC_1d_20200905_20250903.csv data/ETHUSDC/price_1d.csv
ln -sf ../5year_daily/USDCUSDT_1d_20200905_20250903.csv data/USDCUSDT/price_1d.csv

# æˆ–è€…è¤‡è£½æ–‡ä»¶
cp data/5year_daily/ETHUSDC_1d_20200905_20250903.csv data/ETHUSDC/price_1d.csv
cp data/5year_daily/USDCUSDT_1d_20200905_20250903.csv data/USDCUSDT/price_1d.csv
```

### ğŸ“Š å›æ¸¬çµæœç¤ºä¾‹

**USDCUSDT 5å¹´å›æ¸¬çµæœ** (2020-2025):
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ Strategy          â”ƒ APR (%) â”ƒ MDD (%) â”ƒ Sharpe â”ƒ Calmar â”ƒ Rebalances â”ƒ
â”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”©
â”‚ Baseline-Static   â”‚ -0.00   â”‚ 0.90    â”‚ -0.00  â”‚ -0.01  â”‚ 2          â”‚
â”‚ Baseline-Fixed    â”‚ -0.00   â”‚ 1.30    â”‚ -0.00  â”‚ -0.01  â”‚ 15         â”‚
â”‚ Dynamic-Vol       â”‚ -0.00   â”‚ 1.60    â”‚ -0.00  â”‚ -0.01  â”‚ 28         â”‚
â”‚ Dynamic-Inventory â”‚ -0.00   â”‚ 0.30    â”‚ -0.00  â”‚ -0.00  â”‚ 10         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æœ€ä½³åƒæ•¸**ï¼š
- Kå¯¬åº¦å€æ•¸: 1.96
- åƒ¹æ ¼åå·®é–¾å€¼: 113.85 bps
- å†å¹³è¡¡å†·å»æ™‚é–“: 41å°æ™‚

---

## ğŸ› ï¸ ä½¿ç”¨æ–¹æ³•

### 1. ç’°å¢ƒè¨­ç½®

```bash
# å‰µå»ºè™›æ“¬ç’°å¢ƒ
python3 -m venv venv
source venv/bin/activate

# å®‰è£ä¾è³´
pip install -r requirements.txt
```

### 2. æ•¸æ“šç²å–

```bash
# ä¸‹è¼‰é»˜èªæ•¸æ“š
./get_new_data.sh

# æ·»åŠ æ–°å¹£ç¨®
./add_new_symbol.sh SOLUSDC

# è‡ªå®šç¾©ä¸‹è¼‰
./get_new_data.sh -s ETHUSDC,BTCUSDC -f 1d,1h -d 365
```

### 3. é‹è¡Œå›æ¸¬

#### ğŸš€ ä¸€è¡Œå‘½ä»¤å¿«é€Ÿå›æ¸¬

```bash
# æœ€ç°¡å–®çš„ä¸€è¡Œå‘½ä»¤ (æ¨è–¦)
./run_single.sh BTCUSDC 1d 50

# ç›´æ¥ä½¿ç”¨ Python å‘½ä»¤
python run.py full --pool BTCUSDC --freq 1d --n-trials 50

# å®Œæ•´åƒæ•¸ç‰ˆæœ¬
python run.py full --pool BTCUSDC --freq 1d --study-name "BTCUSDC_$(date +%Y%m%d_%H%M%S)" --n-trials 50 --config configs/btcusdc_experiment.yaml
```

#### ğŸ“‹ åƒæ•¸èªªæ˜
- `BTCUSDC`: å¹£ç¨®ä»£ç¢¼ (å¯æ›¿æ›ç‚º ETHUSDC, USDCUSDT ç­‰)
- `1d`: æ•¸æ“šé »ç‡ (1d=æ—¥ç·š, 1h=å°æ™‚ç·š)
- `50`: å„ªåŒ–è©¦é©—æ¬¡æ•¸ (å»ºè­° 20-100)

#### âš ï¸ é‡è¦æ³¨æ„äº‹é …
1. **æ•¸æ“šæ–‡ä»¶å¿…é ˆå­˜åœ¨**: ç¢ºä¿ `data/{POOL_NAME}/price_{frequency}.csv` æ–‡ä»¶å­˜åœ¨
2. **é »ç‡åŒ¹é…**: æ•¸æ“šé »ç‡å¿…é ˆèˆ‡ `--freq` åƒæ•¸åŒ¹é…
3. **study-name**: å¦‚æœä½¿ç”¨ç›´æ¥Pythonå‘½ä»¤ï¼Œå¿…é ˆæä¾› `--study-name` åƒæ•¸

#### ğŸ”§ å…¶ä»–å›æ¸¬æ–¹å¼

```bash
# å¿«é€Ÿæ¸¬è©¦
python run.py quick --pool ETHUSDC --freq 1d

# å®Œæ•´å›æ¸¬
python run.py full --pool ETHUSDC --freq 1d --study-name ethusdc_test --n-trials 10

# æ‰¹é‡å›æ¸¬
./run_all.sh
```

### 4. æŸ¥çœ‹çµæœ

```bash
# æŸ¥çœ‹åœ–è¡¨
ls reports/figs/ethusdc/

# æŸ¥çœ‹çµæœ
ls results/ethusdc_1d_*/

# æŸ¥çœ‹ç›®éŒ„ç´¢å¼•
cat results/INDEX.md
```

## ğŸ”§ é…ç½®èªªæ˜

### 1. ä¸»è¦é…ç½®æ–‡ä»¶

**`configs/experiment_default.yaml`**:
```yaml
# å›æ¸¬é…ç½®
backtest:
  start_date: "2020-09-05"
  end_date: "2025-09-03"
  initial_capital: 10000
  
# ç­–ç•¥é…ç½®
strategies:
  baseline_static:
    width_pct: 500.0
    rebalance_cooldown_hours: 168
  
  dynamic_vol:
    k_width: 1.5
    price_deviation_bps: 50.0
    rebalance_cooldown_hours: 24

# å„ªåŒ–é…ç½®
wfa:
  n_trials: 20
  study_name: "default_optimization"
```

### 2. ç’°å¢ƒè®Šé‡

```bash
# æ•¸æ“šç›®éŒ„
export DATA_DIR="data"

# çµæœç›®éŒ„
export RESULTS_DIR="results"

# æ—¥èªŒç´šåˆ¥
export LOG_LEVEL="INFO"
```

## ğŸ“Š æ€§èƒ½æŒ‡æ¨™èªªæ˜

### 1. æ”¶ç›Šç‡æŒ‡æ¨™

- **APR (Annual Percentage Rate)**: å¹´åŒ–æ”¶ç›Šç‡
- **MDD (Maximum Drawdown)**: æœ€å¤§å›æ’¤
- **Sharpe Ratio**: å¤æ™®æ¯”ç‡ï¼Œé¢¨éšªèª¿æ•´å¾Œæ”¶ç›Š
- **Calmar Ratio**: Calmar æ¯”ç‡ï¼Œæ”¶ç›Šèˆ‡å›æ’¤æ¯”

### 2. é¢¨éšªæŒ‡æ¨™

- **Volatility**: å¹´åŒ–æ³¢å‹•ç‡
- **VaR (Value at Risk)**: é¢¨éšªåƒ¹å€¼
- **CVaR (Conditional VaR)**: æ¢ä»¶é¢¨éšªåƒ¹å€¼

### 3. äº¤æ˜“æŒ‡æ¨™

- **Rebalance Count**: å†å¹³è¡¡æ¬¡æ•¸
- **Average Gas Cost**: å¹³å‡ Gas è²»ç”¨
- **Slippage**: æ»‘é»æå¤±
- **IL (Impermanent Loss)**: ç„¡å¸¸æå¤±

## ğŸš¨ æ³¨æ„äº‹é …

### 1. æ•¸æ“šè³ªé‡

- **å®Œæ•´æ€§æª¢æŸ¥**: ç¢ºä¿æ•¸æ“šæ²’æœ‰ç¼ºå¤±å€¼
- **ç•°å¸¸å€¼è™•ç†**: è­˜åˆ¥å’Œè™•ç†ç•°å¸¸åƒ¹æ ¼æ•¸æ“š
- **æ™‚é–“æˆ³å°é½Š**: ç¢ºä¿ä¸åŒå¹£ç¨®çš„æ™‚é–“æˆ³ä¸€è‡´

### 2. å›æ¸¬é™åˆ¶

- **å‰è¦–åå·®**: é¿å…ä½¿ç”¨æœªä¾†ä¿¡æ¯
- **æ»‘é»å»ºæ¨¡**: è€ƒæ…®çœŸå¯¦çš„äº¤æ˜“æˆæœ¬
- **æµå‹•æ€§å‡è¨­**: å‡è¨­è¶³å¤ çš„æµå‹•æ€§é€²è¡Œäº¤æ˜“

### 3. å„ªåŒ–æ³¨æ„

- **éæ“¬åˆé¢¨éšª**: é¿å…éåº¦å„ªåŒ–æ­·å²æ•¸æ“š
- **æ¨£æœ¬å¤–æ¸¬è©¦**: ä½¿ç”¨æ¨£æœ¬å¤–æ•¸æ“šé©—è­‰ç­–ç•¥
- **ç©©å®šæ€§æª¢æŸ¥**: æª¢æŸ¥åƒæ•¸çš„ç©©å®šæ€§

## ğŸ”® æœªä¾†æ”¹é€²

### 1. åŠŸèƒ½æ“´å±•

- **æ›´å¤šç­–ç•¥**: æ·»åŠ æ©Ÿå™¨å­¸ç¿’ç­–ç•¥
- **å¯¦æ™‚å›æ¸¬**: æ”¯æŒå¯¦æ™‚æ•¸æ“šå›æ¸¬
- **å¤šéˆæ”¯æŒ**: æ”¯æŒå…¶ä»–å€å¡Šéˆçš„ AMM

### 2. æ€§èƒ½å„ªåŒ–

- **ä¸¦è¡Œè¨ˆç®—**: ä½¿ç”¨å¤šé€²ç¨‹åŠ é€Ÿå›æ¸¬
- **GPU åŠ é€Ÿ**: åˆ©ç”¨ GPU é€²è¡Œå¤§è¦æ¨¡è¨ˆç®—
- **æ•¸æ“šåº«å„ªåŒ–**: ä½¿ç”¨æ•¸æ“šåº«å­˜å„²å¤§é‡æ­·å²æ•¸æ“š

### 3. ç”¨æˆ¶é«”é©—

- **Web ç•Œé¢**: å‰µå»º Web å„€è¡¨æ¿
- **å¯è¦–åŒ–å¢å¼·**: æ›´å¤šäº¤äº’å¼åœ–è¡¨
- **å ±å‘Šè‡ªå‹•åŒ–**: è‡ªå‹•ç”Ÿæˆ PDF å ±å‘Š

## ğŸ“ æ”¯æŒèˆ‡è²¢ç»

### 1. å•é¡Œå ±å‘Š

å¦‚æœé‡åˆ°å•é¡Œï¼Œè«‹ï¼š
1. æª¢æŸ¥æ—¥èªŒæ–‡ä»¶
2. æŸ¥çœ‹é…ç½®æ–‡ä»¶
3. æäº¤ Issue åˆ° GitHub

### 2. è²¢ç»ä»£ç¢¼

æ­¡è¿æäº¤ Pull Requestï¼š
1. Fork é …ç›®
2. å‰µå»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤è®Šæ›´
4. å‰µå»º Pull Request

### 3. è¯ç¹«æ–¹å¼

- **GitHub**: [é …ç›®åœ°å€]
- **Email**: [è¯ç¹«éƒµç®±]
- **Discord**: [Discord é »é“]

---

## ğŸ“ æ›´æ–°æ—¥èªŒ

### v1.0.0 (2025-09-03)
- âœ… åˆå§‹ç‰ˆæœ¬ç™¼å¸ƒ
- âœ… æ”¯æŒ ETH/USDCã€BTC/USDCã€USDC/USDT
- âœ… å¯¦ç¾ 4 ç¨®ç­–ç•¥
- âœ… å®Œæ•´çš„åƒæ•¸å„ªåŒ–æ¡†æ¶
- âœ… è‡ªå‹•åŒ–è…³æœ¬å’Œå·¥å…·

---

**ğŸ‰ æ„Ÿè¬ä½¿ç”¨ AMM å‹•æ…‹å†å¹³è¡¡å›æ¸¬ç³»çµ±ï¼**
